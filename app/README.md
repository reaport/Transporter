# Transporter API

**Transporter API** — это  асинхронного веб-приложения на базе **FastAPI** (Python), предназначенного для управления посадкой и высадкой пассажиров.

В проекте демонстрируется:
- Асинхронная логика поездок с использованием `asyncio`;
- Взаимодействие с внешним сервисом `ground-control` через библиотеку `httpx`;
- Пример параллельных «поездок» (тасков) и общих структур данных в памяти;
- Разделение «обычных» логов и «аудита» (через два логгера).

---

## Cтруктура проекта


### Основные файлы

1. **`app/main.py`**  
   - Точка входа приложения (создание экземпляра `FastAPI` и подключение роутов).
   - Настройка логирования (пример `logging` + отдельный `audit_logger`).
   - Запуск Uvicorn-сервера (при выполнении `python -m uvicorn app.main:app ...`).

2. **`app/routes/transporter.py`**  
   - Эндпоинты для:
     - `/load`: посадка пассажиров;
     - `/upload`: высадка пассажиров;
     - `/getCapacity`: получение вместимости;
     - `/updateCapacity`: обновление вместимости.
   - Вызов асинхронной логики перевозки (`process_transporter_task`) из `services/tasks.py`.
   - Логи и аудит (пример использования `logger` и `audit_logger`).

3. **`app/routes/admin.py`**  
   - «админки» (просмотр списка зарегистрированных машин, сброс состояния и т.д.).

4. **`app/services/ground_control.py`**  
   - Функции для взаимодействия с внешним сервисом `ground-control.reaport.ru` (регистрация машины, запрос маршрута, перемещение и уведомление о прибытии).  
   - Используется библиотека `httpx` для асинхронных HTTP‑запросов.

5. **`app/services/tasks.py`**  
   - Основная логика «поездки» (посадка/высадка пассажиров, движение к самолёту, возврат в гараж).  
   - Общие структуры данных (словари с информацией о машинах, их координатах), синхронизация через `Lock`.  
   - Логирование процессов (обычные логи + аудит).

6. **`app/schemas.py`**  
   - Pydantic‑модели (входные запросы/ответы).  
   - Например: `LoadRequest`, `UploadRequest`, `TransporterResponse`, а также модели для взаимодействия с `ground-control` (`RegisterVehicleResponse`, `MoveResponse`).

7. **`requirements.txt`**  
   - Список необходимых библиотек и их версии (FastAPI, uvicorn, httpx).

8. **`README.md`**  
   - Этот файл с описанием.

---
