# Transport Service API

## Описание
Этот сервис отвечает за процесс посадки и высадки пассажиров, а также информирование оркестратора о статусе работы транспортного средства.

## Структура проекта

- `main.py` - основной файл с API
- `config.py` - конфигурация сервиса
- `services.py` - бизнес-логика обработки посадки и высадки пассажиров
- `orchestrator_client.py` - клиент для взаимодействия с оркестратором
- `requirements.txt` - зависимости проекта

## Установка и запуск

### Установка зависимостей
```bash
pip install -r requirements.txt
```

### Запуск сервиса
```bash
uvicorn main:app --host 0.0.0.0 --port 8000
```

## Методы API

### 1. Начало высадки пассажиров
**POST** `/boarding/unboarding/start`

Запускает процесс высадки пассажиров и отправляет оркестратору уведомление о начале высадки.

**Пример запроса:**
```json
{
  "aircraft_id": "12345"
}
```

**Ответ:**
- `204 No Content` - если успешно
- `422 Validation Error` - если ошибка валидации

### 2. Завершение высадки пассажиров
**POST** `/boarding/unboarding/finish`

Завершает процесс высадки пассажиров и отправляет оркестратору уведомление о завершении с указанием количества пассажиров.

**Пример запроса:**
```json
{
  "aircraft_id": "12345",
  "passengers_count": 150
}
```

**Ответ:**
- `204 No Content` - если успешно
- `422 Validation Error` - если ошибка валидации

### 3. Начало посадки пассажиров
**POST** `/boarding/boarding/start`

Запускает процесс посадки пассажиров и отправляет оркестратору уведомление о начале посадки.

**Пример запроса:**
```json
{
  "aircraft_id": "12345"
}
```

**Ответ:**
- `204 No Content` - если успешно
- `422 Validation Error` - если ошибка валидации

### 4. Завершение посадки пассажиров
**POST** `/boarding/boarding/finish`

Завершает процесс посадки пассажиров и отправляет оркестратору уведомление о завершении с указанием количества пассажиров.

**Пример запроса:**
```json
{
  "aircraft_id": "12345",
  "passengers_count": 150
}
```

**Ответ:**
- `204 No Content` - если успешно
- `422 Validation Error` - если ошибка валидации

## Логика работы
1. Оркестратор вызывает метод `/boarding/unboarding/start`, передавая `aircraft_id`. Это означает, что транспортное средство прибыло к самолету.
2. Начинается процесс высадки пассажиров со скоростью 50 человек в секунду.
3. После завершения высадки вызывается `/boarding/unboarding/finish` с `aircraft_id` и фактическим количеством пассажиров.
4. Оркестратор вызывает метод `/boarding/boarding/start`, сигнализируя о начале посадки пассажиров.
5. После завершения посадки вызывается `/boarding/boarding/finish` с количеством пассажиров.

## Конфигурация
В файле `config.py` можно задать настройки, такие как базовый URL оркестратора:
```python
ORCHESTRATOR_URL = "https://orchestrator.reaport.ru/"
```

## Пример взаимодействия с оркестратором

**Отправка запроса на оркестратор:**
```python
import requests

def notify_orchestrator(endpoint, payload):
    url = f"https://orchestrator.reaport.ru/{endpoint}"
    response = requests.post(url, json=payload)
    return response.status_code
```

**Пример вызова:**
```python
notify_orchestrator("boarding/unboarding/start", {"aircraft_id": "12345"})
```

## Контакты
- Автор: [Ваше имя]
- Email: [Ваш email]

